- name: Setup OpenVPN Clients da Vault
  hosts: all
  become: true
  vars:
    vpn_ids: ["nbs", "tredipi"]  # Sovrascrivibile via -e vpn_ids=[...]

  tasks:

    - name: Verifica privilegi sudo
      command: whoami
      register: whoami_output

    - name: Mostra l'utente effettivo
      debug:
        var: whoami_output.stdout

    - name: Debug - Mostra lista VPN da configurare
      debug:
        var: vpn_ids

    - name: Installa OpenVPN
      apt:
        name: openvpn
        state: present
        update_cache: yes
